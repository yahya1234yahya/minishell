#include "minishell.h"

void print_commands(t_cmd *head)
{
    t_cmd *current = head;
    while (current != NULL) {
        printf("Command: %s\n", current->cmd);
        printf("Arguments: %s\n", current->args ? current->args : "(none)");
        printf("Pipe: %d\n", current->pipe);
        printf("Redirection: %d\n", current->redirection);
        printf("path: %s\n", current->path);
        printf("----------------\n");
        current = current->next;
    }
}

int main(int argc, char **argv, char **envp)
{
    t_cmd	*cmd;
    t_cmd	head;
    char	*input;
    char	*word;
	char	*herdoc;

    cmd = init_cmd();
	cmd->env = initenv(envp);
	while (1)
	{
		input = readline("\033[32mminishell\033[0m \033[34m>\033[0m ");
		if (input)
			add_history(input);
        input = expand_variables(input);
        if(!input[0])
            continue ;
        if(check_complete(input) == 0)
        {
            printf("\033[33merror: incomplete command\033[0m\n");
            continue;
        }
        if(parse(cmd, input, envp, 0) == 0)
			continue ;
		print_commands(cmd);
        printf("cmd->redirection : %d\n", cmd->redirection);
		decider(cmd, envp);  //execute the commands
        free(cmd->args);
        cmd->args = NULL;
		cmd->redirection = 0;
    }
    return (0);
}
total 160
drwxr-xr-x  14 mboughra  candidate    476 Aug 10 00:20 .
drwxr-xr-x  11 mboughra  candidate    374 Aug 10 00:00 ..
drwxr-xr-x  13 mboughra  candidate    442 Aug  5 01:31 .git
drwxr-xr-x   4 mboughra  candidate    136 Aug  4 22:16 Archive
-rw-r--r--   1 mboughra  candidate   3365 Aug 10 00:14 Makefile
-rw-r--r--   1 mboughra  candidate     23 Aug  4 22:16 README.MD
drwxr-xr-x  16 mboughra  candidate    544 Aug 10 00:19 execution
-rw-r--r--   1 mboughra  candidate   1332 Aug  9 23:51 main.c
-rwxr-xr-x   1 mboughra  candidate  53240 Aug 10 00:19 minishell
-rw-r--r--   1 mboughra  candidate   2560 Aug 10 00:14 minishell.h
drwxr-xr-x  10 mboughra  candidate    340 Aug 10 00:19 parsing
-rw-r--r--   1 mboughra  candidate    314 Aug  4 22:16 test.c
-rw-r--r--   1 mboughra  candidate   1332 Aug 10 00:20 test.txt
-rw-r--r--   1 mboughra  candidate    210 Aug  4 22:16 test1.c
